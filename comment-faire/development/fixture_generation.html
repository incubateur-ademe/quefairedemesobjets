<!doctype html>
<html class="no-js" lang="fr" data-content_root="../../">
  <head><meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../../genindex.html"><link rel="search" title="Recherche" href="../../search.html"><link rel="next" title="🛹 Déploiement de la plateforme" href="../deployment/README.html"><link rel="prev" title="Gestion de package" href="dependencies.html">

    <!-- Generated with Sphinx 8.2.3 and Furo 2025.09.25 -->
        <title>Utiliser les fixtures - Documentation Longue Vie Aux Objets</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=d111a655" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo.css?v=580074bf" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo-extensions.css?v=8dab3a3b" />
    
    


<style>
  body {
    --color-code-background: #f2f2f2;
  --color-code-foreground: #1e1e1e;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle site navigation sidebar">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc" aria-label="Toggle table of contents sidebar">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <span class="icon"><svg><use href="#svg-menu"></use></svg></span>
      </label>
    </div>
    <div class="header-center">
      <a href="../../README.html"><div class="brand">Documentation Longue Vie Aux Objets </div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../README.html">
  
  <span class="sidebar-brand-text">Documentation Longue Vie Aux Objets </span>
  
</a><form class="sidebar-search-container" method="get" action="../../search.html" role="search">
  <input class="sidebar-search" placeholder="Recherche" name="q" aria-label="Recherche">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1 current has-children"><a class="reference internal" href="../README.html">🤔 COMMENT FAIRE</a><input aria-label="Toggle navigation of 🤔 COMMENT FAIRE" checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul class="current">
<li class="toctree-l2 current has-children"><a class="reference internal" href="README.html">👩‍💻 Espace développeur•euse</a><input aria-label="Toggle navigation of 👩‍💻 Espace développeur•euse" checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="installation.html">Installation de l’application en local</a></li>
<li class="toctree-l3"><a class="reference internal" href="useful_command.html">Commandes Django utiles</a></li>
<li class="toctree-l3"><a class="reference internal" href="dependencies.html">Gestion de package</a></li>
<li class="toctree-l3 current current-page"><a class="current reference internal" href="#">Utiliser les fixtures</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../deployment/README.html">🛹 Déploiement de la plateforme</a><input aria-label="Toggle navigation of 🛹 Déploiement de la plateforme" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../deployment/deployment.html">DevOps, déploiement, opérations</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../administration/README.html">Administration de la plateforme</a><input aria-label="Toggle navigation of Administration de la plateforme" class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../administration/update-ext-id.html">Mettre à jour les identifiants externe</a></li>
<li class="toctree-l3"><a class="reference internal" href="../administration/admin_command.html">Commandes Django d’administration</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../infrastructure/README.html">🏢 Gestion de l’infrastructure</a><input aria-label="Toggle navigation of 🏢 Gestion de l’infrastructure" class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../infrastructure/create_db.html">Créaton d’un base de données sur Scaleway</a></li>
<li class="toctree-l3"><a class="reference internal" href="../infrastructure/monitoring.html">Monitoring sur Scaleway</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting.html">☎️ 3615 jaidesproblemes</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../explications/README.html">❓ EXPLICATIONS</a><input aria-label="Toggle navigation of ❓ EXPLICATIONS" class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../explications/data/README.html">📊 Plateforme de données</a><input aria-label="Toggle navigation of 📊 Plateforme de données" class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../explications/data/ingestion-de-source.html">Ingestion des sources</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../explications/data/flux-dbt.html">Description des flux DBT</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../explications/data/flux-enrich.html">Enrichissement de données</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../explications/db/README.html">Bases de données</a><input aria-label="Toggle navigation of Bases de données" class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../explications/db/prestation-delivery.html">Lieu de prestation</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../explications/frontend/README.html">🎨 Frontend</a><input aria-label="Toggle navigation of 🎨 Frontend" class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../explications/frontend/routing-nginx-cache.html">🚏 Routing, nginx et cache</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../explications/frontend/routing-nginx-cache.html#nginx">nginx</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../explications/frontend/routing-nginx-cache.html#whitenoise">Whitenoise</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../explications/frontend/routing-nginx-cache.html#middlewares">Middlewares</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../explications/frontend/historique.html">Historique</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../explications/iframe/README.html">Afficher l’application dans une Iframe</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../reference/README.html">🧐 REFERENCE</a><input aria-label="Toggle navigation of 🧐 REFERENCE" class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../reference/documentation/README.html">Documentation</a><input aria-label="Toggle navigation of Documentation" class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../reference/documentation/documentation-technique.html">Guide de la documentation technique</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/documentation/security.html">Sécurité</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../reference/coding/README.html">Règles de codage</a><input aria-label="Toggle navigation of Règles de codage" class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../reference/coding/coding-guidelines.html">Règles de codage python et typescript</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/coding/francais-vs-anglais.html">Utilisation des langues françaises et anglaises</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../reference/infrastructure/README.html">Infrastructure</a><input aria-label="Toggle navigation of Infrastructure" class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../reference/infrastructure/scaleway.html">Infrastructure Scaleway</a><input aria-label="Toggle navigation of Infrastructure Scaleway" class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" role="switch" type="checkbox"/><label for="toctree-checkbox-14"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../reference/infrastructure/provisioning.html">Provisionner l’infrastructure</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/infrastructure/provisioning.html">Provisionner l’infrastructure</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../reference/db/README.html">Bases de données</a><input aria-label="Toggle navigation of Bases de données" class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" role="switch" type="checkbox"/><label for="toctree-checkbox-15"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../reference/db/prerequis.html">Prérequis concernant les bases de données</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/db/db_organisation.html">Organisation des bases de données</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/db/architecture.html">Architecture de la base de données de La Carte</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/db/contraintes.html">Utilisation des contraintes SQL</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/db/valeurs-defaut.html">Gestion de valeurs par défaut dans la base de données</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../reference/data/README.html">Gestion des données</a><input aria-label="Toggle navigation of Gestion des données" class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" role="switch" type="checkbox"/><label for="toctree-checkbox-16"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../reference/data/organisation-des-fichiers.html">Architecture des fichiers de code de la partie data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/data/systeme-de-suggestions.html">Système de suggestion</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/data/gestion-des-identifiants.html">Gestion des identifiants</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/data/clustering-deduplication.html">Clustering &amp; Déduplication</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../reference/frontend/README.html">Frontend</a><input aria-label="Toggle navigation of Frontend" class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" role="switch" type="checkbox"/><label for="toctree-checkbox-17"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../reference/frontend/parcel.html">Parcel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/frontend/templates.html">Templates</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/frontend/tailwind.html">Tailwind</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../reference/iframe/README.html">Infrastructure</a><input aria-label="Toggle navigation of Infrastructure" class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" role="switch" type="checkbox"/><label for="toctree-checkbox-18"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../reference/iframe/iframe.html">Iframe</a></li>
</ul>
</li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="../../_sources/comment-faire/development/fixture_generation.md.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="utiliser-les-fixtures">
<h1>Utiliser les fixtures<a class="headerlink" href="#utiliser-les-fixtures" title="Lien vers cette rubrique">¶</a></h1>
<p>Le projet utilise des fixtures Django<a class="footnote-reference brackets" href="#id3" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a> pour les tests.
Celles-ci sont basées sur de la donnée issue de la base de production afin de tester l’application sur des situations <em>de la vraie vie</em>.</p>
<section id="generer-des-fixtures-cas-general">
<h2>Générer des fixtures, cas général<a class="headerlink" href="#generer-des-fixtures-cas-general" title="Lien vers cette rubrique">¶</a></h2>
<p>Toutes les fixtures à l’exception des <code class="docutils literal notranslate"><span class="pre">DisplayedActeur</span></code> (acteurs affichés) et <code class="docutils literal notranslate"><span class="pre">DisplayedPropositionService</span></code> (proposition de service de ces acteurs) peuvent être générées à partir d’une commande <code class="docutils literal notranslate"><span class="pre">make</span></code> :</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>make<span class="w"> </span>generate-fixtures

<span class="c1"># il est conseillé de conserver dans git les fixtures à jour, et d&#39;embarquer</span>
<span class="c1"># ces mises à jour dans les pull request.</span>
git<span class="w"> </span>add<span class="w"> </span>qfdmo/fixtures<span class="w"> </span>qfdmd/fixtures
git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;mise à jour des fixtures&quot;</span>
</pre></div>
</div>
</section>
<section id="generer-des-fixtures-pour-les-acteurs-et-propositions-de-service">
<h2>Générer des fixtures pour les acteurs et propositions de service<a class="headerlink" href="#generer-des-fixtures-pour-les-acteurs-et-propositions-de-service" title="Lien vers cette rubrique">¶</a></h2>
<p>Le volume de données de la table des Acteurs étant gigantesque, les fixtures de cette table sont générées manuellement, lorsque le modèle de données évolue et empêche leur installation ou lorsqu’il est nécessaire d’ajouter des données de test pour couvrir plus exhaustivement le contexte d’utilisation réel de l’application.</p>
<p>Pour ce faire, sont listées dans le <code class="docutils literal notranslate"><span class="pre">Makefile</span></code> une liste de <code class="docutils literal notranslate"><span class="pre">pk</span></code> d’acteurs (champ <code class="docutils literal notranslate"><span class="pre">identifiant_unique</span></code>).
Ces identifiants ont été récupérés à la main, depuis le frontend de la carte :</p>
<ol class="arabic simple">
<li><p>Faire une recherche pour la zone souhaitée</p></li>
<li><p>Récupérer le lien de l’acteur dans la fiche détaillée (en cliquant sur le lien de partage par exemple) –&gt; https://quefairedemesdechets.ademe.fr/adresse_details/3kQK86DEWA3ZrcirdzzBez l’id est 3kQK86DEWA3ZrcirdzzBez</p></li>
<li><p>Chercher cet id dans l’admin Django : https://quefairedemesdechets.ademe.fr/admin/qfdmo/displayedacteur/?q=eYKxBYDMDoMXTr8iiw69Ek</p></li>
<li><p>Récupérer le champ <code class="docutils literal notranslate"><span class="pre">identifiant_unique</span></code> : il peut être un uuid ou un assemblage de chaînes de caractères mentionnant la source, par exemple <code class="docutils literal notranslate"><span class="pre">ocad3e_SGS-02069</span></code></p></li>
<li><p>Ajouter cet identifiant dans le <code class="docutils literal notranslate"><span class="pre">Makefile</span></code> à la suite des autres, derrière le flag <code class="docutils literal notranslate"><span class="pre">--pk</span></code> dans la commande <code class="docutils literal notranslate"><span class="pre">generate-fixtures-acteurs</span></code></p></li>
<li><p>Une fois cela fait, il faut récupérer les <em>primary key</em> des propositions de service associées.
Cela peut-être fait depuis le shell <code class="docutils literal notranslate"><span class="pre">django</span></code> :</p></li>
</ol>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>make<span class="w"> </span>shell
</pre></div>
</div>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="c1"># 1. importer le modèle Django</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">qfdmo.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">DisplayedActeur</span>

<span class="c1"># 2. Stocker les pks dans une variable. Les pks peuvent être copiées-collées depuis le Makefile</span>
<span class="n">pks</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;uuid-dun-acteur&quot;</span><span class="p">,</span> <span class="s2">&quot;identifiant-dun-autre-acteur&quot;</span><span class="p">]</span>

<span class="c1"># 3. Filtrer les acteurs par pks et en récupérer les pks de propositions de services associées</span>
<span class="nb">list</span><span class="p">(</span><span class="n">DisplayedActeur</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">pk__in</span><span class="o">=</span><span class="n">pks</span><span class="p">)</span><span class="o">.</span><span class="n">values_list</span><span class="p">(</span><span class="s2">&quot;proposition_services__pk&quot;</span><span class="p">,</span> <span class="n">flat</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>

<span class="c1"># Sortie attendue: [2163243, 2163244, 2163245, 243160, 435885, 1699381, 738371, 738372, 719100]</span>
</pre></div>
</div>
<ol class="arabic simple" start="7">
<li><p>Cette liste de <code class="docutils literal notranslate"><span class="pre">pk</span></code> peut alors être collées dans le <code class="docutils literal notranslate"><span class="pre">Makefile</span></code></p></li>
<li><p>Les fixtures peuvent être re-générées</p></li>
</ol>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>make<span class="w"> </span>generate-fixtures-acteurs

<span class="c1"># il est conseillé de conserver dans git les fixtures à jour, et d&#39;embarquer</span>
<span class="c1"># ces mises à jour dans les pull request.</span>
git<span class="w"> </span>add<span class="w"> </span>qfdmo/fixtures
git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;mise à jour des fixtures&quot;</span>
</pre></div>
</div>
</section>
<section id="id2">
<h2>Utiliser les fixtures<a class="headerlink" href="#id2" title="Lien vers cette rubrique">¶</a></h2>
<p>Les fixtures peuvent être utilisées de plusieurs manières :</p>
<ul class="simple">
<li><p>Dans les tests</p></li>
<li><p>En local</p></li>
<li><p>Dans la CI</p></li>
</ul>
<p>En local, on utilise généralement une base de production mais il peut être intéressant d’installer les fixtures afin d’avoir un environnement <em>iso-CI</em>.
Pour ce faire :</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1"># ⚠️ Cette commande va supprimer les données locales, elle est donc à executer en conscience</span>
make<span class="w"> </span>db-restore-for-tests
</pre></div>
</div>
<p>Dans les tests, les fixtures peuvent être importées en utilisant la fonction <code class="docutils literal notranslate"><span class="pre">callcommand</span></code> de Django :</p>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">django.core.management</span><span class="w"> </span><span class="kn">import</span> <span class="n">call_command</span>
<span class="n">call_command</span><span class="p">(</span><span class="s1">&#39;loaddata&#39;</span><span class="p">,</span> <span class="s1">&#39;synonymes&#39;</span><span class="p">,</span> <span class="s1">&#39;produits&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Le nom des fixtures à utiliser est celui du nom du fichier <code class="docutils literal notranslate"><span class="pre">.json</span></code> de la fixture.
Django se charge de découvrir automatiquement la fixture correspondante.</p>
</section>
</section>
<hr class="footnotes docutils" />
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id3" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">1</a><span class="fn-bracket">]</span></span>
<p><a class="reference external" href="https://docs.djangoproject.com/en/5.2/topics/db/fixtures/">https://docs.djangoproject.com/en/5.2/topics/db/fixtures/</a></p>
</aside>
</aside>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="../deployment/README.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">🛹 Déploiement de la plateforme</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="dependencies.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Gestion de package</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2024, Fabien Le Frapper (@fabienheureux), Nicolas Oudard, Max Corbeau
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Utiliser les fixtures</a><ul>
<li><a class="reference internal" href="#generer-des-fixtures-cas-general">Générer des fixtures, cas général</a></li>
<li><a class="reference internal" href="#generer-des-fixtures-pour-les-acteurs-et-propositions-de-service">Générer des fixtures pour les acteurs et propositions de service</a></li>
<li><a class="reference internal" href="#id2">Utiliser les fixtures</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../../_static/documentation_options.js?v=d1a510d7"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/scripts/furo.js?v=46bd48cc"></script>
    <script src="../../_static/translations.js?v=e6b791cb"></script>
    </body>
</html>