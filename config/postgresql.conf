listen_addresses = '*'

ssl = off  # SSL disabled to reduce overhead, assuming all connections are local or via trusted networks

# Resource Usage
shared_buffers = 6GB  # Allocate 25% of total RAM to shared buffers for caching frequently used data
effective_cache_size = 18GB  # Estimate available cache size to 75% of total RAM for query planning optimizations
work_mem = 64MB  # Allocate memory for complex queries, allows larger sorts and joins without disk spills
maintenance_work_mem = 512MB  # Larger maintenance memory for faster `VACUUM` and `CREATE INDEX` operations
autovacuum_work_mem = -1  # Let autovacuum inherit the default, efficient memory usage
min_wal_size = 80MB  # Set minimum WAL size to control disk space usage for Write-Ahead Logs
max_wal_size = 2GB  # Allow up to 2GB for WAL files to reduce checkpoint frequency and improve write performance
checkpoint_timeout = 10min  # Increase checkpoint interval to reduce overhead from frequent disk writes
checkpoint_completion_target = 0.9  # Ensure checkpoint process is spread over time for less performance impact

# Write Ahead Log (WAL) Settings
wal_level = replica  # WAL level set to replica for replication support with minimal overhead
archive_mode = off  # Archive WAL files off for performance, unless required for point-in-time recovery
max_wal_senders = 10  # Allow up to 10 replication senders, useful for scaling read replicas
max_replication_slots = 10  # Allow up to 10 replication slots, useful for more replicas or logical replication

# Query Tuning
default_statistics_target = 100  # Balanced statistics collection for query planner, can be adjusted based on workload
random_page_cost = 1.1  # Slightly higher page cost to prioritize sequential scans over random access
seq_page_cost = 1  # Default cost for sequential page accesses (used in query planning)
effective_io_concurrency = 2  # Allow two I/O operations in parallel, optimize I/O-bound queries
enable_bitmapscan = on  # Enable bitmap scan for better performance on large tables
enable_hashagg = on  # Enable hash aggregation for more efficient query planning
enable_hashjoin = on  # Enable hash joins for faster query processing in many scenarios

# Logging (Disabled for performance)
log_destination = 'stderr'  # Direct log output to stderr, but logging collector is off
logging_collector = off  # Disable the logging collector to reduce I/O overhead
log_directory = '/dev/null'  # Send logs to /dev/null, effectively disabling log file creation
log_filename = 'postgresql.log'  # Default log file name, but unnecessary with logging disabled
log_statement = 'none'  # Disable query logging to minimize performance hit
log_duration = off  # Disable query duration logging to reduce overhead
log_checkpoints = off  # Disable checkpoint logging to avoid excessive logging for performance
log_temp_files = 0  # Disable logging of temporary files to minimize unnecessary disk usage
log_lock_waits = off  # Disable lock wait logging to reduce performance impact on blocking queries
log_autovacuum_min_duration = -1  # Disable logging of autovacuum events to prevent excessive logging

# Autovacuum (Optimized for performance, but still enabled)
autovacuum = on  # Keep autovacuum enabled to prevent table bloat and keep databases healthy
autovacuum_max_workers = 3  # Allow 3 autovacuum workers to operate concurrently
autovacuum_naptime = 1min  # Set autovacuum to check for tasks every minute for timely cleanup
autovacuum_vacuum_cost_delay = 20ms  # Set a small cost delay to avoid autovacuum impacting performance
autovacuum_vacuum_scale_factor = 0.1  # Trigger autovacuum when tables grow 10% in size
autovacuum_analyze_scale_factor = 0.05  # Trigger autovacuum analyze when tables grow 5% in size

# Replication Settings
hot_standby = on  # Enable hot standby for read replicas to offload read queries
max_sync_workers_per_subscription = 2  # Limit synchronous replication workers to 2 for balanced load
synchronous_commit = off  # Disable synchronous commit for faster writes at the cost of potential data loss on crash

# Timezone and Locale
timezone = 'UTC'  # Use UTC for consistent timestamp handling across regions
lc_messages = 'en_US.UTF-8'  # Use English for messages, for simplicity
lc_monetary = 'en_US.UTF-8'  # Set locale for monetary values to US format
lc_numeric = 'en_US.UTF-8'  # Use US numeric format (e.g., decimal point)
lc_time = 'en_US.UTF-8'  # Use US date/time format

# Other Default Settings
datestyle = 'ISO, MDY'  # Use ISO date format with MDY style for US locales
timezone_abbreviations = 'Default'  # Default timezone abbreviations for simplicity
log_line_prefix = ''  # No log line prefix as logging is disabled