{% extends 'layout/base.html' %}

{% block content %}
    <div class="fr-container fr-mb-md-14v fr-pt-4w">
        <div class="fr-grid-row fr-grid-row--gutters fr-grid-row--center">
            <h1>Connexion à Que Faire de mes objets</h1>


            <form method="post" action="{{ url('qfdmo:login') }}">
                {% if next %}
                    <div class="fr-alert fr-alert--warning fr-my-2w">
                        <p class="fr-alert__title">
                            {% if request.user.is_authenticated %}
                                Votre compte utilisateur n'a pas accès à cette page. Pour continuer, merci de vous identifier avec un compte ayant les droits suffisants.
                            {% else %}
                                Merci de vous connecter pour voir cette page.
                            {% endif %}
                        </p>
                    </div>
                {% endif %}

                {% if form.errors %}
                    <div class="fr-alert fr-alert--error fr-my-2w">
                        <p class="fr-alert__title">
                            Votre nom d'utilisateur et mot de passe ne correspondent pas. Merci de réessayer.</p>
                    </div>
                {% endif %}

                {{ csrf_input }}
                <input type="hidden" name="next" value="{{ next }}">
                <fieldset class="fr-fieldset">
                    <legend class="fr-fieldset__legend" id="login-1760-fieldset-legend">
                        <h2>Se connecter avec son compte</h2>
                    </legend>
                    <div class="fr-fieldset__element">
                        <fieldset class="fr-fieldset">
                            <div class="fr-fieldset__element">
                                <div class="fr-input-group">
                                    <label class="fr-label" for="{{ form.username.id_for_label }}">
                                        Identifiant
                                    </label>
                                    <input class="fr-input" autocomplete="username" aria-required="true" name="username" id="{{ form.username.id_for_label }}" type="text" value="{{ form.username.value() or "" }}">
                                </div>
                            </div>
                            <div class="fr-fieldset__element">
                                <div class="fr-password" id="{{ form.password.id_for_label }}">
                                    <label class="fr-label" for="{{ form.password.id_for_label }}">
                                        Mot de passe
                                    </label>
                                    <div class="fr-input-wrap">
                                        <input class="fr-password__input fr-input" aria-required="true" name="password" autocomplete="current-password" id="{{ form.password.id_for_label }}" type="password" value="{{ form.password.value() or "" }}">
                                    </div>
                                </div>
                            </div>
                        </fieldset>
                    </div>
                    <div class="fr-fieldset__element">
                        <button class="fr-btn">
                            Se connecter
                        </button>
                    </div>
                </fieldset>
            </form>
        </div>
    </div>

{% endblock content %}

