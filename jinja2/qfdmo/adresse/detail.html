{% extends 'layout/base.html' %}

{% block content %}
    <div class="fr-container fr-my-3w qfdmo-bg-blue-france">
        <div class="qfdmo-w-[480] qfdmo-bg-white fr-p-3w">

            <div class="qfdmo-flex qfdmo-justify-between">
                <div class="fr-mb-1v">
                    {% for action in adresse.acteur_actions(direction=direction) %}
                        <p class="fr-badge fr-badge--sm  qfdmo-bg-{{action.couleur}} qfdmo-bg-opacity-30 fr-my-0">
                            {% if action.icon %}
                                <span class="{{ action.icon }}" aria-hidden="true"></span>&nbsp;
                            {% endif %}
                            {{ action.nom_affiche }}
                        </p>
                    {% endfor %}
                </div>
                <div class="fr-ml-1w">
                    <button type='button' class="fr-btn fr-btn--sm fr-btn--tertiary-no-outline fr-btn--icon-left fr-icon-close-line">fermer</button>
                </div>
            </div>


            <div class="qfdmo-flex qfdmo-justify-between qfdmo-items-center">
                <h4 class='fr-mb-0'>
                    {{ adresse.nom_affiche }}
                </h4>
                <div class="fr-m-0 fr-ml-1w fr-text--xs">
                    Mis à jour le {{ adresse.modifie_le.strftime('%d/%m/%Y') }}
                </div>
            </div>
            <p class="qfdmo-text-sm fr-mb-1w fr-mt-0">
                {% for acteur_service in adresse.acteur_services() %}
                    {{ acteur_service }}{% if not loop.last %},&nbsp;{% endif %}
                {% endfor %}
                {% if adresse.distance %}
                    &nbsp;({{adresse.distance}}km) <!-- FIXME: to be display smartly as a distance in m or km-->
                {% endif %}
                &nbsp;(13 km)<!-- FIXME: to be removed -->
            </p>

            {% if not adresse.is_digital %}
                <hr class="qfdmo-adresse-hr qfdmo-w-[95%] qfdmo-mx-auto qfdmo-border-0 qfdmo-bg-grey-850 qfdmo-rounded">
                <div class="fr-text--sm fr-my-1w"> {{ adresse.adresse|title }}
                    {% if adresse.adresse_complement %},&nbsp;{{ adresse.adresse_complement }}{% endif %}
                    {{ adresse.code_postal }}&nbsp;{{ adresse.ville|title }}
                </div>
            {% endif %}

            <hr class="qfdmo-adresse-hr qfdmo-w-[95%] qfdmo-mx-auto qfdmo-border-0 qfdmo-bg-grey-850 qfdmo-rounded">
            <div class="fr-m-3w qfdmo-flex qfdmo-justify-around">
                {% if True %} <!-- FIXME: if lat long src and dest -->
                    <a class="qfdmo-flex qfdmo-flex-col qfdmo-items-center qfdmo-cursor-pointer after:qfdmo-hidden" href="#" target="_blank" title="itinéraire">
                        <span class="fr-p-3v fr-icon--lg qfdmo-text-white qfdmo-text-lg qfdmo-bg-blue-france-main-525 hover:blue-france-main-525-hover active:blue-france-main-525-active qfdmo-rounded-full fr-icon-road-map-line"></span>
                        <span class="fr-text--xs fr-mb-0">Itinéraire</span>
                    </a>
                {% endif %}
                {% if adresse.url %}
                    <a class="qfdmo-flex qfdmo-flex-col qfdmo-items-center qfdmo-cursor-pointer after:qfdmo-hidden" href="{{ adresse.url }}" target="_blank" title="Site Internet">
                        <span class="fr-p-3v fr-icon--lg qfdmo-text-white qfdmo-text-lg qfdmo-bg-blue-france-main-525 hover:blue-france-main-525-hover active:blue-france-main-525-active qfdmo-rounded-full fr-icon-global-line"></span>
                        <span class="fr-text--xs fr-mb-0">Site Internet</span>
                    </a>
                {% endif %}
                {% if adresse.email %}
                    <a class="qfdmo-flex qfdmo-flex-col qfdmo-items-center qfdmo-cursor-pointer after:qfdmo-hidden" href="mailto:{{ adresse.email }}" target="_blank" title="Courriel">
                        <span class="fr-p-3v fr-icon--lg qfdmo-text-white qfdmo-text-lg qfdmo-bg-blue-france-main-525 hover:blue-france-main-525-hover active:blue-france-main-525-active qfdmo-rounded-full fr-icon-mail-line"></span>
                        <span class="fr-text--xs fr-mb-0">Courriel</span>
                    </a>
                {% endif %}
                {% if adresse.telephone or True %}
                    <a class="qfdmo-flex qfdmo-flex-col qfdmo-items-center qfdmo-cursor-pointer after:qfdmo-hidden" href="tel:{{ adresse.telephone }}" target="_blank" title="Téléphone">
                        <span class="fr-p-3v fr-icon--lg qfdmo-text-white qfdmo-text-lg qfdmo-bg-blue-france-main-525 hover:blue-france-main-525-hover active:blue-france-main-525-active qfdmo-rounded-full fr-icon-phone-line"></span>
                        <span class="fr-text--xs fr-mb-0">Téléphone</span>
                    </a>
                {% endif %}
                <a class="qfdmo-flex qfdmo-flex-col qfdmo-items-center qfdmo-cursor-pointer after:qfdmo-hidden" href="#" target="_blank" title="Partager">
                    <span class="fr-p-3v fr-icon--lg qfdmo-text-white qfdmo-text-lg qfdmo-bg-blue-france-main-525 hover:blue-france-main-525-hover active:blue-france-main-525-active qfdmo-rounded-full fr-icon-git-branch-line"></span>
                    <span class="fr-text--xs fr-mb-0">Partager</span>
                </a>

            </div>

            <hr class="qfdmo-adresse-hr qfdmo-w-[95%] qfdmo-mx-auto qfdmo-border-0 qfdmo-bg-grey-850 qfdmo-rounded">

            <div class="fr-my-1w">
                To be continued…
            </div>

            <a class="fr-my-1w fr-btn fr-btn--tertiary qfdmo-whitespace-nowrap qfdmo-w-full qfdmo-justify-center"
                href="https://tally.so/r/3xMqd9?Nom={{adresse.nom}}&Ville={{adresse.ville}}"
                target="_blank" rel="noopener"
            >
                Proposer une modification
            </a>

        </div>
    </div>
{% endblock %}