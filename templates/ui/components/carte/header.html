{% load dsfr_tags %}
<header
    class="
    {# The z-index below can impact the shadow over #}
    {% block header_classes %}qf-z-20{% endblock %}
    qf-bg-white qf-border-b qf-border-solid qf-border-t-0 qf-border-x-0 qf-border-grey-900
    max-md:qf-p-1w
    {% if not mode_liste %}qf-shadow-lg{% endif %}"
>
    <div
        class="qf-flex qf-flex-col md:qf-flex-row sm:qf-items-center"
    >

        {% if not carte_config or not carte_config.supprimer_branding %}
        <div
            class="qf-items-center qf-hidden md:qf-flex qf-flex-row"
            id="logo"
            data-remove-if-internal
        >
            {% include 'ui/layout/_partials/header_logos.html' %}
        </div>
        {% endif %}


        {# Recherche adresse #}
        <div class="fr-my-1w qf-flex-grow qf-flex qf-flex-col
            {% if carte_config and carte_config.supprimer_branding %}qf-p-2w{% endif %}"
        >
            {% include "ui/components/carte/_addresses_partials/adresse_input_form.html" %}

            {% comment %}
            {% if not carte_config or not carte_config.cacher_legende %}
            <div class="lg:qf-hidden fr-mt-1w qf-flex qf-justify-between">
                {% if not carte_config or not carte_config.supprimer_branding %}
                <button
                    class="fr-btn fr-btn--sm fr-btn--tertiary"
                    type="button"
                    title="À propos"
                    data-action="click -> search-solution-form#toggleAPropos"
                    data-remove-if-internal
                >
                    Infos
                </button>
                {% endif %}
                <div class="qf-flex qf-flex-row-reverse">
                    {% if form.legend_grouped_action|length > 1 %}
                    <button
                        class="fr-btn fr-btn--sm fr-btn--secondary fr-ml-1w fr-btn--icon-left fr-icon-eye-line"
                        type="button"
                        data-testid="legend-mobile-button"
                        data-action="click -> search-solution-form#showLegend"
                    >
                        Légende
                    </button>
                    {% endif %}
                </div>
            </div>
            {% endif %}
            {% endcomment %}
        </div>

        {# Navigation entre carte / liste #}
        <div class="md:qf-px-2w max-md:qf-flex qf-justify-between qf-items-end" id="view-mode-nav">
            {{ forms.view_mode }}
            <div class="md:qf-hidden">
            {% include "ui/components/modals/filtres.html" with form=forms.filtres_form button_extra_classes="fr-btn--sm" id="filtres-mobile" %}
            </div>
        </div>
    </div>
</header>
