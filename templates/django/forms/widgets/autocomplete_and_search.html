{% load custom_filters %}
<div class="fr-search-bar fr-search-bar--lg autocomplete qfdmo-relative" role="search">
    <input
        data-action="
                     input->{{ widget.data_controller }}#complete
                     focus->{{ widget.data_controller }}#complete
                     keydown.down->{{ widget.data_controller }}#keydownDown
                     keydown.up->{{ widget.data_controller }}#keydownUp
                     keydown.enter->{{ widget.data_controller }}#keydownEnter
                     keydown.esc->{{ widget.data_controller }}#closeAllLists
                     blur->{{ widget.data_controller }}#blurInput
                    "
        data-{{ widget.data_controller }}-target="input"
        data-on-focus=true
        type="{{ widget.type }}"
        name="{{ widget.name }}"
        id="{{ widget.name }}"
        {% if widget.value != None %} value="{{ widget.value|stringformat:'s' }}"{% endif %}
        {% include "django/forms/widgets/attrs.html" %}
    >
    <span data-{{ widget.data_controller }}-target="spinner" class="fr-icon-refresh-line qfdmo-absolute qfdmo-right-0 qfdmo-top-0 qfdmo-m-1w qfdmo-animate-spin qfdmo-hidden"></span>
    <button class="fr-btn"
            {% for name, value in widget.btn_attrs.items %}
                {{ name }}="{{ value }}"
            {% endfor %}
            data-testid="rechercher-adresses-submit"
    >
        Rechercher
    </button>
</div>
<p data-address-autocomplete-target="displayError" class="fr-error-text fr-mt-1w" style="display:none;">
    Texte dâ€™erreur obligatoire
</p>
<script type="application/json" data-{{ widget.data_controller }}-target="allAvailableOptions">
    {{ widget.optgroups|options_in_json }}
</script>
